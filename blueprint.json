{
    "$schema": "https://playground.wordpress.net/blueprint-schema.json",
    "landingPage": "https://playground.wordpress.net/wp-admin/",
    "preferredVersions": {
      "php": "8.2",
      "wp": "6.5"
    },
    "phpExtensionBundles": [
      "kitchen-sink"
    ],
    "features": {
      "networking": true
    },
    "steps": [
      {
        "step": "setSiteOptions",
        "options": {
          "blogname": "GatherPress",
          "blogdescription": "Powering Communities with WordPress.",
          "users_can_register": 1,
          "permalink_structure": "/%year%/%monthnum%/%postname%/"
        }
      },
      {
        "step": "runPHP",
        "code": "<?php require '/wordpress/wp-load.php'; $user_id = wp_create_user('editor', 'editorpass', 'editor@localhost.test'); (new WP_User($user_id))->set_role('editor');"
      },
      {
        "step": "login",
        "username": "admin",
        "password": "password"
      },
      {
          "step": "writeFile",
          "path": "/wordpress/assets.zip",
          "data": {
              "resource": "url",
              "url": "https://raw.githubusercontent.com/carstingaxion/gatherpress-block-playground/main/zips/playground-assets.zip",
              "caption": "Downloading CI/CD prepared assets."
          },
          "progress": {
              "weight": 2,
              "caption": "Applying CI/CD prepared assets."
          }
      },
      {
          "step": "unzip",
          "zipFile": {
            "resource": "vfs",
            "path": "/wordpress/assets.zip"
          },
          "extractToPath": "/wordpress"
      },
      {
        "step": "wp-cli",
        "command": "wp plugin activate gatherpress"
      },
      {
        "step": "wp-cli",
        "command": "wp plugin activate gatherpress-query-loop"
      },
      {
        "step": "wp-cli",
        "command": "wp plugin activate gatherpress-venue"
      },
      {
        "step": "wp-cli",
        "command": "wp plugin activate gatherpress-venue-website"
      }
    ]
  }
  